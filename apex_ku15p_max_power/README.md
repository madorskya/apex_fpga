This firmware is free firmware: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.

# Firmware for testing FPGAs under maximum power

## How to use:

This firmware implements a number of very long shift registers and drives a "meander" pattern through them, maximizing the switching power consumption. 
It creates shift registers based on single FFs and/or SRL primitives. Additionally, it can instantiate a number of BRAMs and also stimulate them with constantly changing data. 
Note that BRAMs seem to consume a very small amount of power relative to logic fabric (at least in US+ devices), so adding them does not add much power.

Additionally, this firmware instantiates all available GTH and GTY transceivers in the FPGA that it was designed for (XCKU15P), initialized to consume close to a maximum power.

The VIO implemented in this firmware lets you turn on and off each of the shift registers so the power can be adjusted during operation. At the configuration time all 
shift registers are disabled as a precaution. Enable them one by one and watch the power consumption closely.

Parameters that you can change:

`NS_FF` - count of registers based on FFs. Make sure this matches width of VIO ports

`NS_SRL` - count of registers based on SRL primitives. Make sure this matches width of VIO ports

`BS36` - count of BRAM-36K modules

Adjust these parameters to use most of the available logic resources in the FPGA that you're testing.

All shift registers and BRAMs are fed from the same global clock. This clock is generated by an MMCM. The output clock frequency of this MMCM has a very profound effect on 
power consumption of this firmware. Please be very careful when changing that frequency. 

When compiling this firmware you may see a number of timing violations. This is one of the very rare designs where timing errors absolutely do not matter; just ignore them.

PLEASE BE VERY CAREFUL, FPGA CAN BE DAMAGED IF THIS FIRMWARE IS USED IMPROPERLY. DESIGNER IS NOT RESPONSIBLE FOR ANY DAMAGE. SEE LICENSE ABOVE.




